# ğŸ—ï¸ Architecture du Projet - TP1 PDF Parser

## ğŸ“Š Vue d'Ensemble du SystÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Postman    â”‚  â”‚     cURL     â”‚  â”‚   Swagger    â”‚          â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚      UI      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                 â”‚                  â”‚                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                                      â”‚
â”‚                    HTTP POST /pdf/parse                          â”‚
â”‚                    multipart/form-data                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API REST (Program.cs)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Endpoints:                                               â”‚   â”‚
â”‚  â”‚  â€¢ GET  /            â†’ Informations API                   â”‚   â”‚
â”‚  â”‚  â€¢ POST /pdf/parse   â†’ Parser un PDF                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚  Validation   â”‚                             â”‚
â”‚                    â”‚  â€¢ Fichier?   â”‚                             â”‚
â”‚                    â”‚  â€¢ Extension? â”‚                             â”‚
â”‚                    â”‚  â€¢ Taille?    â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SERVICE LAYER (Services/PdfService.cs)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ParsePdfAsync(stream, fileName)                          â”‚   â”‚
â”‚  â”‚  â€¢ Ouvre le PDF avec PdfPig                               â”‚   â”‚
â”‚  â”‚  â€¢ Pour chaque page:                                      â”‚   â”‚
â”‚  â”‚    â”œâ”€â†’ Tente extraction texte natif                       â”‚   â”‚
â”‚  â”‚    â””â”€â†’ Si vide: Lance OCR                                 â”‚   â”‚
â”‚  â”‚  â€¢ Structure les rÃ©sultats                                â”‚   â”‚
â”‚  â”‚  â€¢ Retourne PdfResponse                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚           â–¼                                 â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ExtractText    â”‚              â”‚  ExtractOCR    â”‚             â”‚
â”‚  â”‚ FromPage       â”‚              â”‚  FromPage      â”‚             â”‚
â”‚  â”‚ (PdfPig)       â”‚              â”‚  (Tesseract)   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â”‚                                 â”‚                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                            â–¼                                      â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                   â”‚ ParseIntoSectionsâ”‚                           â”‚
â”‚                   â”‚ â€¢ DÃ©tecte titres â”‚                           â”‚
â”‚                   â”‚ â€¢ Groupe texte   â”‚                           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DATA MODELS (Models/PdfResponse.cs)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PdfResponse                                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ Title: string                                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ Sections: List<PdfSection>                            â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€ PdfSection                                        â”‚   â”‚
â”‚  â”‚  â”‚      â”œâ”€ Heading: string?                               â”‚   â”‚
â”‚  â”‚  â”‚      â””â”€ Text: string                                   â”‚   â”‚
â”‚  â”‚  â””â”€ Meta: PdfMetadata                                     â”‚   â”‚
â”‚  â”‚      â””â”€ Pages: int                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼ JSON
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  Response au Client    â”‚
                â”‚  {                     â”‚
                â”‚    "title": "...",     â”‚
                â”‚    "sections": [...],  â”‚
                â”‚    "meta": {...}       â”‚
                â”‚  }                     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flux de Traitement d'un PDF

### ScÃ©nario 1 : PDF avec Texte Natif

```
1. Client Upload PDF
   â”‚
   â–¼
2. Program.cs reÃ§oit IFormFile
   â”‚
   â–¼
3. Validation (taille, type, extension)
   â”‚
   â–¼
4. PdfService.ParsePdfAsync()
   â”‚
   â–¼
5. PdfDocument.Open(stream)  [PdfPig]
   â”‚
   â–¼
6. Pour Page 1:
   â”‚ ExtractTextFromPage()
   â”‚ â†“
   â”‚ page.Text â†’ "Voici le contenu..."  âœ“ (Texte trouvÃ©)
   â”‚
   â–¼
7. ParseIntoSections()
   â”‚ â†“
   â”‚ DÃ©tection titres / paragraphes
   â”‚ â†“
   â”‚ CrÃ©ation de PdfSection[]
   â”‚
   â–¼
8. CrÃ©ation PdfResponse
   â”‚
   â–¼
9. SÃ©rialisation JSON
   â”‚
   â–¼
10. Retour au Client (HTTP 200)
```

**Temps typique** : < 1 seconde pour 10 pages

---

### ScÃ©nario 2 : PDF ScannÃ© (Image)

```
1. Client Upload PDF scannÃ©
   â”‚
   â–¼
2. Program.cs reÃ§oit IFormFile
   â”‚
   â–¼
3. Validation OK
   â”‚
   â–¼
4. PdfService.ParsePdfAsync()
   â”‚
   â–¼
5. PdfDocument.Open(stream)
   â”‚
   â–¼
6. Pour Page 1:
   â”‚ ExtractTextFromPage()
   â”‚ â†“
   â”‚ page.Text â†’ ""  âœ— (Vide - c'est une image)
   â”‚ â†“
   â”‚ ExtractTextFromImagePageAsync()  [OCR activÃ©]
   â”‚ â†“
   â”‚ RenderPageToImage() â†’ Bitmap
   â”‚ â†“
   â”‚ TesseractEngine.Process(image)
   â”‚ â†“
   â”‚ Reconnaissance optique...
   â”‚ â†“
   â”‚ "Voici le texte reconnu..."  âœ“
   â”‚
   â–¼
7. ParseIntoSections()
   â”‚
   â–¼
8. CrÃ©ation PdfResponse
   â”‚
   â–¼
9. Retour JSON (HTTP 200)
```

**Temps typique** : 2-5 secondes par page

---

## ğŸ§© Architecture en Couches

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESENTATION LAYER                      â”‚
â”‚                      (Program.cs)                          â”‚
â”‚  â€¢ Endpoints REST                                          â”‚
â”‚  â€¢ Validation des requÃªtes                                 â”‚
â”‚  â€¢ SÃ©rialisation JSON                                      â”‚
â”‚  â€¢ Gestion des erreurs HTTP                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ IFormFile
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BUSINESS LAYER                         â”‚
â”‚                   (Services/PdfService.cs)                 â”‚
â”‚  â€¢ Logique mÃ©tier                                          â”‚
â”‚  â€¢ Extraction de texte                                     â”‚
â”‚  â€¢ OCR                                                     â”‚
â”‚  â€¢ Structuration des donnÃ©es                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ string, PdfSection[]
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA LAYER                           â”‚
â”‚                  (Models/PdfResponse.cs)                   â”‚
â”‚  â€¢ ModÃ¨les de donnÃ©es                                      â”‚
â”‚  â€¢ Structure JSON                                          â”‚
â”‚  â€¢ DTO (Data Transfer Objects)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ DÃ©pendances Externes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PdfParserApi                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚    DÃ©pendances NuGet:                              â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚    1. UglyToad.PdfPig                              â”‚    â”‚
â”‚  â”‚       â€¢ Lecture et parsing de PDF                  â”‚    â”‚
â”‚  â”‚       â€¢ Extraction de texte natif                  â”‚    â”‚
â”‚  â”‚       â€¢ Manipulation de pages                      â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚    2. Tesseract                                    â”‚    â”‚
â”‚  â”‚       â€¢ Moteur OCR                                 â”‚    â”‚
â”‚  â”‚       â€¢ Reconnaissance de caractÃ¨res               â”‚    â”‚
â”‚  â”‚       â€¢ Support multi-langues                      â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚    3. System.Drawing.Common                        â”‚    â”‚
â”‚  â”‚       â€¢ Manipulation d'images (Bitmap)             â”‚    â”‚
â”‚  â”‚       â€¢ Conversion PDF â†’ Image                     â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚    4. Swashbuckle.AspNetCore                       â”‚    â”‚
â”‚  â”‚       â€¢ Documentation Swagger                      â”‚    â”‚
â”‚  â”‚       â€¢ Interface de test interactive              â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DÃ©pendances SystÃ¨me:
â€¢ .NET 8.0+ SDK
â€¢ Tesseract OCR (installÃ© sÃ©parÃ©ment)
â€¢ tessdata (fichiers de langue)
```

---

## ğŸ¯ Points d'Extension Futurs

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚      Architecture Actuelle (TP1)        â”‚
     â”‚         PDF â†’ Texte â†’ JSON              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     TP2      â”‚ â”‚     TP3      â”‚ â”‚     TP4      â”‚
â”‚   SynthÃ¨se   â”‚ â”‚  Assistant   â”‚ â”‚  Interface   â”‚
â”‚    Vocale    â”‚ â”‚    Vocal     â”‚ â”‚    React     â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚ â€¢ NVIDIA Rivaâ”‚ â”‚ â€¢ STT/TTS    â”‚ â”‚ â€¢ UI Web     â”‚
â”‚ â€¢ TTS        â”‚ â”‚ â€¢ Commandes  â”‚ â”‚ â€¢ Temps rÃ©el â”‚
â”‚ â€¢ Audio      â”‚ â”‚ â€¢ Wake Word  â”‚ â”‚ â€¢ WebSocket  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Organisation des Fichiers

```
PdfParserApi/
â”‚
â”œâ”€â”€ Program.cs                      [Point d'entrÃ©e]
â”‚   â””â”€â”€ Configure l'application
â”‚       â”œâ”€â”€ Services (DI)
â”‚       â”œâ”€â”€ Middleware
â”‚       â””â”€â”€ Endpoints
â”‚
â”œâ”€â”€ Models/                         [Couche DonnÃ©es]
â”‚   â””â”€â”€ PdfResponse.cs
â”‚       â”œâ”€â”€ PdfSection
â”‚       â”œâ”€â”€ PdfMetadata
â”‚       â””â”€â”€ PdfResponse
â”‚
â”œâ”€â”€ Services/                       [Couche MÃ©tier]
â”‚   â””â”€â”€ PdfService.cs
â”‚       â”œâ”€â”€ ParsePdfAsync()
â”‚       â”œâ”€â”€ ExtractTextFromPage()
â”‚       â”œâ”€â”€ ExtractTextFromImagePageAsync()
â”‚       â”œâ”€â”€ RenderPageToImage()
â”‚       â”œâ”€â”€ ParseIntoSections()
â”‚       â””â”€â”€ Utilitaires (IsLikelyHeading, etc.)
â”‚
â”œâ”€â”€ bin/                            [GÃ©nÃ©ration auto]
â”‚   â””â”€â”€ Fichiers compilÃ©s
â”‚
â”œâ”€â”€ obj/                            [GÃ©nÃ©ration auto]
â”‚   â””â”€â”€ Fichiers intermÃ©diaires
â”‚
â”œâ”€â”€ PdfParserApi.csproj             [Configuration]
â”‚   â””â”€â”€ Packages NuGet
â”‚
â”œâ”€â”€ appsettings.json                [Configuration]
â”‚   â””â”€â”€ ParamÃ¨tres de l'app
â”‚
â””â”€â”€ .gitignore                      [Git]
    â””â”€â”€ Fichiers Ã  ignorer
```

---

## ğŸ” SÃ©curitÃ© et Validations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RequÃªte HTTP POST                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Validation #1         â”‚  â† File != null ?
        â”‚  PrÃ©sence du fichier   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ âœ“
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Validation #2         â”‚  â† Extension == .pdf ?
        â”‚  Type de fichier       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ âœ“
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Validation #3         â”‚  â† Size < 10 MB ?
        â”‚  Taille du fichier     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ âœ“
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Traitement sÃ©curisÃ©   â”‚
        â”‚  â€¢ using pour streams  â”‚
        â”‚  â€¢ try/catch           â”‚
        â”‚  â€¢ Timeout implicite   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Gestion de la MÃ©moire

```
Upload PDF â†’ IFormFile (en mÃ©moire)
             â”‚
             â–¼
          Stream â”€â”€usingâ”€â”€â†’ Fermeture automatique
             â”‚
             â–¼
          PdfDocument â”€â”€usingâ”€â”€â†’ LibÃ©ration auto
             â”‚
             â–¼
          Bitmap (OCR) â”€â”€usingâ”€â”€â†’ LibÃ©ration auto
             â”‚
             â–¼
          Tesseract â”€â”€usingâ”€â”€â†’ LibÃ©ration auto
```

**Principe** : Toutes les ressources sont automatiquement libÃ©rÃ©es grÃ¢ce Ã  `using`

---

## ğŸš¦ Codes de RÃ©ponse HTTP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  200 OK                                              â”‚
â”‚  â€¢ PDF traitÃ© avec succÃ¨s                           â”‚
â”‚  â€¢ JSON retournÃ©                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  400 Bad Request                                     â”‚
â”‚  â€¢ Aucun fichier uploadÃ©                            â”‚
â”‚  â€¢ Mauvaise extension                               â”‚
â”‚  â€¢ Fichier trop gros                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  500 Internal Server Error                          â”‚
â”‚  â€¢ Erreur lors du parsing                           â”‚
â”‚  â€¢ OCR a Ã©chouÃ©                                     â”‚
â”‚  â€¢ Erreur systÃ¨me                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Performance

```
Type de PDF          â”‚ Temps Moyen    â”‚ MÃ©thode
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Texte natif (10 p)  â”‚ < 1 seconde   â”‚ PdfPig
Texte natif (100 p) â”‚ 2-3 secondes  â”‚ PdfPig
ScannÃ© (1 p, 300dpi)â”‚ 2 secondes    â”‚ Tesseract OCR
ScannÃ© (1 p, 600dpi)â”‚ 4 secondes    â”‚ Tesseract OCR
ScannÃ© (10 p)       â”‚ 20-30 secondesâ”‚ Tesseract OCR
```

---

## ğŸ¨ Format de RÃ©ponse JSON

```json
{
  "title": "document.pdf",        â† Nom du fichier
  "sections": [                   â† Liste de sections
    {
      "heading": null,            â† Pas de titre (paragraphe simple)
      "text": "Premier paragraphe du document..."
    },
    {
      "heading": "Introduction",  â† Titre dÃ©tectÃ©
      "text": "Le texte de l'introduction..."
    },
    {
      "heading": "Chapitre 1",
      "text": "Contenu du chapitre 1..."
    }
  ],
  "meta": {                       â† MÃ©tadonnÃ©es
    "pages": 5                    â† Nombre de pages
  }
}
```

---

## ğŸ”„ Cycle de Vie d'une RequÃªte

```
1. DÃ©marrage Application
   â†“
2. Initialisation Services (DI)
   â”œâ”€ PdfService (Singleton)
   â”œâ”€ Swagger
   â””â”€ CORS
   â†“
3. Application en Ã‰coute (port 5000)
   â†“
4. RequÃªte Arrive
   â†“
5. Middleware Pipeline
   â”œâ”€ CORS
   â”œâ”€ Routing
   â””â”€ Endpoint Matching
   â†“
6. Endpoint Handler
   â”œâ”€ Validation
   â”œâ”€ Injection de PdfService
   â””â”€ Appel ParsePdfAsync()
   â†“
7. Traitement
   â”œâ”€ Lecture PDF
   â”œâ”€ Extraction / OCR
   â””â”€ Structuration
   â†“
8. SÃ©rialisation JSON
   â†“
9. RÃ©ponse HTTP
   â†“
10. Log dans Console
    â†“
    (Retour Ã  l'Ã©tape 4 pour la prochaine requÃªte)
```

---

## ğŸ“ Points d'Apprentissage ClÃ©s

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Architecture REST                              â”‚
â”‚     â€¢ Endpoints (routes)                          â”‚
â”‚     â€¢ Verbes HTTP (GET, POST)                     â”‚
â”‚     â€¢ Codes de statut                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Dependency Injection                          â”‚
â”‚     â€¢ Inversion de contrÃ´le                       â”‚
â”‚     â€¢ Singleton vs Scoped vs Transient            â”‚
â”‚     â€¢ TestabilitÃ©                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Gestion de Ressources                         â”‚
â”‚     â€¢ using statements                            â”‚
â”‚     â€¢ IDisposable                                 â”‚
â”‚     â€¢ Streams                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Async/Await                                   â”‚
â”‚     â€¢ Programmation asynchrone                    â”‚
â”‚     â€¢ Task<T>                                     â”‚
â”‚     â€¢ Performance                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Ce diagramme doit Ãªtre utilisÃ© comme rÃ©fÃ©rence visuelle pendant le dÃ©veloppement !**
